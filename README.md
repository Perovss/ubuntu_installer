# Playbook установки Kibana

1. Загрузить tar.gz Kibana с удаленного URL.

Используется tag: kibana.  
Загружаем архив kibana удаленного url с помощью модуля get_url, где указываем url: адрес архива на удаленном URL  
dest: куда будет скопирован архив  
mode: устанавливаем права 755  
timeout: Тайм-аут 60 секундах для запроса URL.  
force: будем загружать файл каждый раз и заменять файл при изменении содержимого  
register: get_kibana until & get_kibana is succeeded - повторная попытка скачивания архива(цикл).  

2. Создание директории для Kibana.

Используется tag: kibana  
С помощью модуля file с параметрами state: и path: создаем директорию для установки Kibana  

3. Распаковка архива Kibana в каталог установки.  

Используется tag: kibana, skip_ansible_lint  
become: true - повышение привилегий пользователя  
распаковываем архив ранее созданную директорию с помощью модуля unarchive  
Используем параметры:  
copy: false - поиск архива целевой машине  
src - директория где находиться архив  
dest - директория распаковки архива  
extra_opts [--strip-components=1] усечение верхней папки и просто извлечение содержимого с сохраненной структурой файлов-папок  

4. Установка среды Kibana

Используется tag: kibana  
Используется модуль template - Шаблон файла для целевого хоста  
become: true - повышение привилегий пользователя  
С помошью языка шаблонов jinja2 обрабатывается шаблон с переменным из директории шаблона src: и копируется по в директорию по адресу dest:  # ubuntu_installer
